<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <div>
            {% if image %}
            <h1>Uploaded IMages</h1>
            <img src="{{ image.url }}" alt="Uploaded Image">
            {% endif %}
        </div>
        <div>
            <h1>Upload a moment with Daddy</h1>
        </div>
        <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{form}}
            <input type="submit" name="upload" id="">
        </form>
        <div>
            <h3>frontend upload</h3>
            <button id="upload_widget" class="cloudinary-button">Upload files</button>

    
        </div>
    </div>
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  

    <script type="text/javascript">  
        var myWidget = cloudinary.createUploadWidget({
            cloudName: 'drl8qtk5b', 
            uploadPreset: 'awolaru'
        }, (error, result) => { 
            if (!error && result && result.event === "success") { 
                	   // Access the delivery URL of the uploaded image 
   var imageUrl = result.info.secure_url; 
   // Save imageUrl to your database 
   // You can use an AJAX request to send this data to your server
   console.log('Done! Here is the image info: ', imageUrl); 
            }
        })

        document.getElementById("upload_widget").addEventListener("click", function(){
            myWidget.open();
        }, false);
    </script>
</body>
</html>